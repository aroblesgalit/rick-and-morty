import{o as s,c as r,a as l,t as o,_ as E,p as Y,d as z,F as M,r as k,n as A,g as T,i as p,j as L,s as D,k as g,l as q,u as x}from"./entry.34e01b41.js";import{u as J}from"./characters.fa378e70.js";const K={class:"mb-6 flex justify-between"},O={__name:"MatchGameHeader",props:["timer","setCards"],setup(t){return(_,n)=>(s(),r("div",K,[l("div",null,[l("button",{onClick:n[0]||(n[0]=e=>t.setCards("easy")),class:"rounded bg-[#00b5cc] text-white px-2 py-1 mr-2 hover:bg-[#e89ac7] text-sm"},"Easy"),l("button",{onClick:n[1]||(n[1]=e=>t.setCards("medium")),class:"rounded bg-[#00b5cc] text-white px-2 py-1 mr-2 hover:bg-[#e89ac7] text-sm"},"Medium"),l("button",{onClick:n[2]||(n[2]=e=>t.setCards("hard")),class:"rounded bg-[#00b5cc] text-white px-2 py-1 hover:bg-[#e89ac7] text-sm"},"Hard")]),l("div",null,o(Math.floor(t.timer/60))+"m "+o(t.timer%60<10?"0":"")+o(t.timer%60)+"s",1)]))}};const Q=t=>(Y("data-v-a6ce6e02"),t=t(),z(),t),U={class:"card-inner relative w-full h-full text-center"},W=Q(()=>l("div",{class:"card-front absolute w-full h-full"},[l("img",{src:"https://preview.redd.it/x498howiltl71.gif?format=png8&s=d1c048cf6e8e9863f60e390f628a75fffd592e08",alt:"",class:"w-full"})],-1)),X={class:"card-back"},Z=["src"],ee={__name:"MatchGameCard",props:["card"],setup(t){return(_,n)=>(s(),r("div",U,[W,l("div",X,[l("img",{class:"w-full",src:t.card.image,alt:"character card"},null,8,Z)])]))}},te=E(ee,[["__scopeId","data-v-a6ce6e02"]]);const ae={class:"grid grid-cols-4 gap-3 md:gap-6"},se=["id","onClick"],re={__name:"MatchGameCards",props:["cards","flipCard"],setup(t){return(_,n)=>{const e=te;return s(),r("div",ae,[(s(!0),r(M,null,k(t.cards,a=>(s(),r("div",{id:a.id,key:a.id,class:A([[{flipped:a.flipped}],"card rounded-lg overflow-hidden shadow-md h-full relative bg-transparent cursor-pointer"]),onClick:m=>t.flipCard(a)},[T(e,{card:a},null,8,["card"])],10,se))),128))])}}},ne=E(re,[["__scopeId","data-v-88124a1e"]]),de={key:0,class:"mt-6"},le=l("h3",{class:"text-lg font-semibold mb-2"},"You times:",-1),ce={class:"grid grid-cols-3 gap-3"},oe={key:0},ie=l("h4",null,"Easy",-1),ue={key:0},me={key:1},he=l("h4",null,"Medium",-1),_e={key:0},fe={key:2},ve=l("h4",null,"Hard",-1),pe={key:0},ge={__name:"MatchGameTimes",props:["cards","bestTimes"],setup(t){return(_,n)=>t.cards.length>0?(s(),r("div",de,[le,l("div",ce,[t.bestTimes.some(e=>e.mode=="easy")?(s(),r("div",oe,[ie,(s(!0),r(M,null,k(t.bestTimes,e=>(s(),r("div",{key:e.id},[e.mode=="easy"?(s(),r("span",ue,o(Math.floor(e.seconds/60))+"m "+o(e.seconds%60<10?"0":"")+o(e.seconds%60)+"s ",1)):p("",!0)]))),128))])):p("",!0),t.bestTimes.some(e=>e.mode=="medium")?(s(),r("div",me,[he,(s(!0),r(M,null,k(t.bestTimes,e=>(s(),r("div",{key:e.id},[e.mode=="medium"?(s(),r("span",_e,o(Math.floor(e.seconds/60))+"m "+o(e.seconds%60<10?"0":"")+o(e.seconds%60)+"s ",1)):p("",!0)]))),128))])):p("",!0),t.bestTimes.some(e=>e.mode=="hard")?(s(),r("div",fe,[ve,(s(!0),r(M,null,k(t.bestTimes,e=>(s(),r("div",{key:e.id},[e.mode=="hard"?(s(),r("span",pe,o(Math.floor(e.seconds/60))+"m "+o(e.seconds%60<10?"0":"")+o(e.seconds%60)+"s ",1)):p("",!0)]))),128))])):p("",!0)])])):p("",!0)}},xe=L("matchGameStore",()=>{const t=J(),{setCharactersResults:_}=t,{charactersResults:n,charactersInfo:e}=D(t),a=g([]),m=g([]),f=g(4),I=g([]),b=g(0),v=g(""),C=g(!0);let y;async function H(h){try{switch(C.value=!0,clearInterval(y),P(),a.value=[],h){case"easy":v.value="easy",f.value=4;break;case"medium":v.value="medium",f.value=6;break;case"hard":v.value="hard",f.value=8;break;default:v.value="easy",f.value=4}let c=Math.random()*(parseInt(e.value.pages)-1)+1;await _(c.toString());let d=[...n.value],i=[];for(let S=1;S<=f.value;S++){let B=Math.floor(Math.random()*d.length),w=d[B],V={id:w.id+"-a",image:w.image,flipped:!1,matched:!1},j={id:w.id+"-b",image:w.image,flipped:!1,matched:!1};i.push(V,j),d.splice(B,1)}let u=i.length,$;for(;u!=0;)$=Math.floor(Math.random()*u),u--,[i[u],i[$]]=[i[$],i[u]];a.value=i}catch{throw q({status:404,statusMessage:"Please try again.",fatal:!0})}}function N(h){if(C.value&&(F(),C.value=!1),m.value.length==2)return;let c=a.value.findIndex(d=>d.id==h.id);a.value[c].flipped||(a.value[c].flipped=!0,m.value.push(h),m.value.length===2&&G(m.value[0],m.value[1]))}function G(h,c){let d=a.value.findIndex(u=>u.id==h.id),i=a.value.findIndex(u=>u.id==c.id);a.value[d].image===a.value[i].image?(a.value[d].matched=!0,a.value[i].matched=!0,m.value=[],a.value.filter(u=>u.matched==!0).length==a.value.length&&(clearInterval(y),setTimeout(()=>{alert("You won! Play again."),R(b.value,v.value)},1e3))):setTimeout(()=>{a.value[d].flipped=!1,a.value[i].flipped=!1,m.value=[]},1500)}function F(){let h=new Date,c,d;y=setInterval(()=>{c=new Date,d=c.getTime()-h.getTime(),b.value=Math.round(d/1e3)},1e3)}function P(){b.value=0}function R(h,c,d=new Date){I.value.push({id:d,seconds:h,mode:c})}return{cards:a,timer:b,bestTimes:I,setCards:H,flipCard:N,matchCards:G}}),be={class:"md:max-w-3xl mx-auto"},we={__name:"matchgame",setup(t){const _=xe(),{setCards:n,flipCard:e}=_,{cards:a,timer:m,bestTimes:f}=D(_);return n("easy"),(I,b)=>{const v=O,C=ne,y=ge;return s(),r("div",be,[T(v,{timer:x(m),setCards:x(n)},null,8,["timer","setCards"]),T(C,{cards:x(a),flipCard:x(e)},null,8,["cards","flipCard"]),T(y,{cards:x(a),bestTimes:x(f)},null,8,["cards","bestTimes"])])}}};export{we as default};
